<main class="col-sm-12 col-md-12" ng-controller="EntreeServiceCtrl">

  <div ng-if="status==1"> Message envoyé, vous pouvez passer au suivant.</div>
  <div ng-if="status==2"> Erreur de traitement, veuillez réessayer dans un moment</div>
  <div ng-if="status==3"> Chargement en cours </div>


  <div class="form-group">
    <label for="formGroupNom">Recherche personne : </label>
    <input ng-change="loadTiers(form.nom)" type="text" ng-model="form.nom" class="form-control" id="formGroupNom" placeholder="Nom" required>
  </div>

<div ng-if="tiers.length > 0" >
  <ul  ng-click="onClick(tier)" class="list-group" ng-repeat="tier in tiers" >
    <li class="list-group-item active">{{tier.nom}}</li>
    <li class="list-group-item">{{tier.zip}} {{tier.town}}</li>
    <li class="list-group-item">{{tier.email}}</li>
    <li class="list-group-item">{{tier.phone}}</li>
 </ul>
</div>

<form ng-submit="submit(personne)" ng-if="status == 0 ">
<div ng-if="personne != null">
<div class="form-group">
  <label for="formGroupNom">Nom</label>
  <input type="text" ng-model="personne.nom" class="form-control" id="formGroupNom">
</div>

<div class="form-group">
  <label for="formGroupNom">Adresse</label>
  <input type="text" ng-model="personne.address" class="form-control" id="formGroupNom">
</div>

<div class="form-group">
  <label for="formGroupNom">Zip</label>
  <input type="text" ng-model="personne.zip" class="form-control" id="formGroupNom">
</div>

<div class="form-group">
  <label for="formGroupNom">Lieu</label>
  <input type="text" ng-model="personne.town" class="form-control" id="formGroupNom">
</div>

<div class="form-group">
  <label for="formGroupNom">email</label>
  <input type="email" ng-model="personne.email" class="form-control" id="formGroupNom">

</div>
<div class="form-group">
  <label for="formGroupNom">Telephone</label>
  <input type="tel" ng-model="personne.phone" class="form-control" id="formGroupNom">
</div>

<div class="form-group row">
  <div class="col-md-3">
    <label for="urgence">N° d'urgence</label>
    <input type="tel" ng-model="personne.extra.nb" class="form-control" id="urgence" required>
  </div>
  <div class="col-md-3">
    <label for="parent">Lien de parenté</label>
    <select class="form-control" id="parent" ng-model="personne.extra.lp" ng-options="p.code as p.label for p in parentList" required>
      <option value="">-- Selection parenté --</option>
    </select>
  </div>
</div>

</div>

<div role="alert" ng-repeat="tag in tags" >
  <p class="alert" ng-class="{'alert-success': tag.checked == 'true' }" ng-click="actionTag(tag, $index)" ng-model="tagged" class="mb-0">{{ tag.label }}</p>
</div>

<button type="submit()" class="btn btn-primary btn-block" >Envoyer</button>

<br>

</form>

</main>
